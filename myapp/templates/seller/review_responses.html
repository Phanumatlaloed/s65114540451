{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Customer Reviews üíñ</title>
    <link rel="stylesheet" href="{% static 'styles/sellreviews.css' %}">
    <link rel="stylesheet" href="{% static 'styles/sidebar.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° Font Awesome ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <body>
    <!-- Mobile Hamburger Menu -->
    <div class="hamburger-menu" id="hamburger-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </div>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <h2 class="sidebar-title">
                <i class="fas fa-store"></i> Genni Shop
            </h2> 
            <ul class="menu">
                <li class="menu-header"><i class="fas fa-shopping-cart"></i> ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</li>
                <li class="menu-item"><a href="{% url 'seller_dashboard' %}"><i class="fas fa-chart-line"></i> ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</a></li>
                <li class="menu-item"><a href="{% url 'seller_orders' %}"><i class="fas fa-box"></i> ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a></li>
                <li class="menu-item"><a href="{% url 'seller_payment_verification' %}"><i class="fas fa-credit-card"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</a></li>
                <li class="menu-item"><a href="{% url 'seller_refund_requests' %}"><i class="fas fa-undo"></i> ‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>

                <li class="menu-header"><i class="fas fa-tags"></i> ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</li>
                <li class="menu-item"><a href="{% url 'my_products' %}"><i class="fas fa-cubes"></i> ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a></li>
                <li class="menu-item"><a href="{% url 'add_product' %}"><i class="fas fa-plus-circle"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</a></li>

                <li class="menu-header"><i class="fas fa-chart-bar"></i> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</li>
                <li class="menu-item"><a href="{% url 'seller_performance' %}"><i class="fas fa-award"></i> ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>
                <li class="menu-item"><a href="{% url 'seller_notifications_lists' %}"><i class="fas fa-bell"></i> ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</a></li>
                <li class="menu-item active "><a href="{% url 'seller_reviews' %}"><i class="fas fa-star"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</a></li>
            
                <li class="menu-header"><i class="fas fa-cog"></i> ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</li>
                <li class="menu-item"><a href="{% url 'edit_store' %}"><i class="fas fa-store-alt"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>
                <li class="menu-item"><a href="{% url 'edit_seller_profile' %}"><i class="fas fa-user-edit"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a></li>
                <li class="menu-item"><a href="{% url 'seller_wallet' %}"><i class="fas fa-wallet"></i> ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô</a></li>
                <li class="menu-item logout"><a href="{% url 'seller_logout' %}"><i class="fas fa-sign-out-alt"></i> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
            </ul>
        </aside>

        <div class="container">
            <h2>üíñ Manage Customer Reviews üíñ</h2>

            {% if reviews %}
                {% for review in reviews %}
                    <div class="review-card">
                        <div class="card-body">
                            <h3 class="card-title">{{ review.product.name }}</h3>
                            <p class="review-meta">
                                By <strong>{{ review.user.username }}</strong> on {{ review.created_at|date:"F j, Y" }}
                            </p>
                            
                            <div class="rating">‚≠ê {{ review.rating }}</div>

                            <p class="review-text">üí¨ Customer Review:</p>
                            <p class="review-content">{{ review.comment }}</p>

                            {% if review.media.all %}
                                <div class="media-section">
                                    <strong>üì∏ Attached Media:</strong>
                                    <div class="media-container">
                                        {% for media in review.media.all %}
                                            {% if media.media_type == "image" %}
                                                <img src="{{ media.file.url }}" alt="Review Image" class="img-thumbnail">
                                            {% elif media.media_type == "video" %}
                                                <video controls>
                                                    <source src="{{ media.file.url }}" type="video/mp4">
                                                    Your browser does not support the video tag.
                                                </video>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            {% endif %}

                            {% if review.response %}
                                <div class="response-box">
                                    <strong>üìù Your Response:</strong> {{ review.response.response_text }}
                                </div>
                            {% else %}
                                <form method="POST" action="{% url 'review_response' review.id %}" class="response-form">
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <label for="response_text">üñäÔ∏è Your Response:</label>
                                        <textarea name="response_text" class="form-control" rows="3" placeholder="Write your response here..." required></textarea>
                                    </div>
                                    <button type="submit" class="btn-submit">üí¨ Submit Response</button>
                                </form>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="alert">No customer reviews found for your products. üí¨üíñ</div>
            {% endif %}
        </div>
    </div>

</body>
</html>
